<!DOCTYPE html>
<html>

<head>
    <title>Tic-Tac-Toe</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            font-family: 'Itim', cursive;
        }

        .background {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .container {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
            max-width: 315px;
        }

        .tile {
            border: 3px solid #fff;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            cursor: pointer;
        }

        .tile:hover {
            background: rgba(255, 255, 255, 1);
        }

        .playerX {
            color: #09C372;
        }

        .playerO {
            color: #498AFB;
        }

        .announcer {
            font-size: 2em;
            color: white;
        }

        .hide {
            display: none;
        }

        #reset {
            padding: 10px 20px;
            font-size: 1em;
            background: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <main class="background">
        <section class="title">
            <h1>Tic Tac Toe</h1>
        </section>
        <section class="display">Player <span class="display-player playerX">X</span>'s turn</section>
        <section class="container">
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
        </section>
        <section class="display announcer hide"></section>
        <section class="controls"><button id="reset">Reset</button></section>
    </main>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const tiles = Array.from(document.querySelectorAll('.tile'));
            const playerDisplay = document.querySelector('.display-player');
            const resetButton = document.querySelector('#reset');
            const announcer = document.querySelector('.announcer');

            let board = ['', '', '', '', '', '', '', '', ''];
            let currentPlayer = 'X';
            let isGameActive = true;

            const PLAYERX_WON = 'PLAYERX_WON';
            const PLAYERO_WON = 'PLAYERO_WON';
            const TIE = 'TIE';

            const winningConditions = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]
            ];

            const isValidAction = (tile) => tile.innerText === '';
            const updateBoard = (index) => { board[index] = currentPlayer; };
            const changePlayer = () => {
                playerDisplay.classList.remove(`player${currentPlayer}`);
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                playerDisplay.innerText = currentPlayer;
                playerDisplay.classList.add(`player${currentPlayer}`);
            };
            const announce = (type) => {
                switch (type) {
                    case PLAYERO_WON: announcer.innerHTML = 'Player <span class="playerO">O</span> Won'; break;
                    case PLAYERX_WON: announcer.innerHTML = 'Player <span class="playerX">X</span> Won'; break;
                    case TIE: announcer.innerText = 'Tie';
                }
                announcer.classList.remove('hide');
            };
            const handleResultValidation = () => {
                let roundWon = false;
                for (let i = 0; i < winningConditions.length; i++) {
                    const winCondition = winningConditions[i];
                    const a = board[winCondition[0]];
                    const b = board[winCondition[1]];
                    const c = board[winCondition[2]];
                    if (a === '' || b === '' || c === '') continue;
                    if (a === b && b === c) {
                        roundWon = true;
                        break;
                    }
                }
                if (roundWon) {
                    announce(currentPlayer === 'X' ? PLAYERX_WON : PLAYERO_WON);
                    isGameActive = false;
                    return;
                }
                if (!board.includes('')) announce(TIE);
            };
            const userAction = (tile, index) => {
                if (isValidAction(tile) && isGameActive) {
                    tile.innerText = currentPlayer;
                    tile.classList.add(`player${currentPlayer}`);
                    updateBoard(index);  // Array manipulation
                    handleResultValidation();
                    changePlayer();
                }
            };

            tiles.forEach((tile, index) => tile.addEventListener('click', () => userAction(tile, index)));  // Event listeners

            const resetBoard = () => {
                board = ['', '', '', '', '', '', '', '', ''];
                isGameActive = true;
                announcer.classList.add('hide');
                if (currentPlayer === 'O') changePlayer();
                tiles.forEach(tile => {
                    tile.innerText = '';
                    tile.classList.remove('playerX', 'playerO');
                });
            };
            resetButton.addEventListener('click', resetBoard);
        });

    </script>
</body>

</html>